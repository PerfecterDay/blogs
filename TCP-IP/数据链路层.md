# 数据链路层MAC帧
{docsify-updated}

数据链路层使用的**信道**主要有以下两种类型：

1. **点对点信道**: 这种信道使用一对一的点对点通信方式。类似于两台机器使用一条专用线路连接。
2. **广播通信**: 这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专门的共享信道协议来协调这些主机的数据发送。

数据链路层的三个基本问题是：

+ 封装成帧

  就是在一段数据的前后分别添加首部和尾部，构成一个帧。首部和尾部的一个重要作用是进行帧定界。每种数据链路层协议都规定了所能传送的帧的**数据部分**的最大长度上限——**最大传送单元MTU（**Maximum Transfer Unit）。MAC帧的 MTU 为 1500 字节。

+ 透明传输

  在数据链路层透明传送数据表示无论什么样的比特组合的数据，都能够按照原样地没有差错地通过数据链路层进行传输。

+ 差错检测

  通常只是检测比特错误（传送过程中0变1或1变0），通过在数据后面加上冗余码用来检错。**冗余码通常称为帧检验序列FCS（Frame Check Sequence)** ，检错方法通常采用**循环冗余检验CRC**（Cyclic Redundancy Check）。数据链路层只负责无差错接受，凡是检验出错的帧**一律丢弃，并且不做任何其他事情**。因此像**帧丢失、帧重复和帧失序**这种差错不在数据链路层的职责范围，由上层协议（TCP）来完成差错纠正。

### MAC帧的格式

<center><img src="pics/MAC-Frame.png" alt="" width=60%></center>

<center><img src="pics/MAC-Frame2.png"></center>

在传输媒体上实际传送的要比MAC帧还多8个字节。因为当一个站刚开始接收MAC帧时，由于适配器还没有与到达的比特流达成同步，因此MAC帧的最前面若干位无法接收，结果整个的MAC成为无用帧。因此前7个字节用来使接收端的适配器能够迅速调整其时钟频率，使它和发送端的时钟同步。然后用一个字节作为帧开始界定符。因为以太网传送数据是以帧为单位传送的，各帧之间必须有一定的间隙，因此接收端只要找到帧开始界定符，后边的比特流就都属于同一个MAC帧。所以，以太网不需要使用帧结束界定符，也不需要使用字节插入来保证透明传输。
