# The Parallel Collector
{docsify-updated}

parallel collector（此处也称为  throughput collector）是一种与serial collector类似的分代收集器。 serial collector 和 parallel collector 的主要区别在于：并行收集器有多个线程，用于加快垃圾收集速度。

并行收集器通过命令行选项 `-XX:+UseParallelGC` 启用。 默认情况下，使用该选项时，minor and major gc 将并行运行，以进一步减少垃圾收集的开销。

## Parallel Collector 的线程数
在具有 $N$ 个硬件线程（其中 $N>8$）的机器上，并行收集器使用固定的分数乘以 $N$ 作为垃圾收集器线程数。

当 $N$ 的值较大时，分数约为 $5/8$。 当 $N<8$ 时，使用的数字是 $N$。 在特定的平台上，该分数会降至 $5/16$。 垃圾收集器线程的具体数量可以通过命令行选项进行调整（稍后会介绍）。 在只有一个处理器的主机上，并行收集器的性能可能不如串行收集器，因为并行执行需要开销（例如同步）。 不过，当运行具有中型到大型堆的应用程序时，在有两个处理器的计算机上，并行收集器的性能通常会略微优于串行收集器，而当有两个以上处理器时，并行收集器的性能通常会明显优于串行收集器。

可以使用命令行选项 `-XX:ParallelGCThreads=<N>` 控制垃圾收集器线程的数量。 如果使用命令行选项来调整堆，那么并行收集器所需的堆大小与串行收集器所需的堆大小相同，这样才能获得良好的性能。 不过，启用并行收集器应该会缩短收集暂停时间。 

由于多个垃圾收集线程都参与了 minor gc，因此在收集过程中可能会出现从年轻代向老年代升级的碎片。 参与minor gc的每个垃圾收集线程都会保留一部分老年代内存空间用于保存从年轻代晋升过来的对象，这些 "晋升缓冲区 "可能会造成碎片。 减少垃圾回收线程的数量和增大老年代的大小可以减少这种碎片效应。

## Parallel Collector 的分代
