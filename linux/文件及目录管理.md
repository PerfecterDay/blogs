# 文件及目录管理
{docsify-updated}

- [文件及目录管理](#文件及目录管理)
	- [linux文件夹](#linux文件夹)
	- [ls](#ls)
	- [常用命令汇总](#常用命令汇总)
	- [Chmod 总结](#chmod-总结)

## linux文件夹
1. `/bin`  
**/bin 目录包含系统中所有用户都能使用的基本用户命令的二进制文件**。在这里，我们可以找到 ls、cp 和 echo 等随时可以执行的 Linux 命令，以及 bash 和 csh 等 shell。此外，/bin 还包含启动或修复系统时可能需要的可立即运行的可执行文件。
2. `/boot`  
**在 /boot 目录中，我们可以找到用于启动操作系统的文件，通常是内核映像、引导加载器（例如 LILO、GRUB）相关文件、配置文件和映射安装程序**。一般来说，我们可以在这里找到 vmlinuz、System.map、initrd 和 config 文件。其中，vmlinuz 是我们真正的内核。引导加载程序会加载并执行该内核。System.map 文件包含内核符号列表和相应的地址。初始 ramdisk（initrd）文件用于加载初始启动过程中所需的驱动程序。config 文件包含内核选项列表、设备列表和设备选项。
3. `/dev`  
/dev 目录是存储所有设备文件的地方。**该目录中的设备文件代表连接到系统的设备**。应用程序可以使用系统调用与它们交互，执行 I/O 操作。与硬件设备相对应的设备驱动程序大多有两种类型：块设备驱动程序或字符设备驱动程序。
4. `/etc`  
本地计算机的特定配置文件包含在 /etc 目录中。**该目录包含大多数全局配置文件**。不过，较大的软件包可以在 /etc 下有自己的子目录。例如 /etc/X11、/etc/sgml 和 /etc/xml。
5. `/home`  
**/home 目录是为不同用户创建 home 目录的默认位置**。例如，假设有一个用户名为 "Sam "的用户。那么，Sam 的默认主目录就是 /home/Sam。换句话说，/home 下的目录为没有 root 权限的普通用户提供了个人工作空间。
6. `/lib`  
**/lib 目录包含系统启动所必需的共享库**。系统启动所需的设备驱动程序放在 /lib/modules/'kernel-version'子目录下。它还包含 /bin 和 /sbin 中的二进制文件运行根文件系统命令所需的库。
7. `/media`  
当我们将任何可移动媒体设备连接到系统时，**/media 目录包含的子目录将被用作挂载点**。我们可以找到代表不同可移动媒体设备（如 CD-ROM 和 U 盘）的子目录或目录的符号链接。例如，在 Linux 系统中插入光盘时，/media 目录内会自动创建一个目录。我们可以用它来访问该目录下的 CD 内容。
8. ` /mnt`  
/mnt 目录是一个挂载点，我们可以在此挂载驻留在硬盘驱动器、U 盘或光盘等存储设备上的临时文件系统。与系统自动挂载可移动媒体的 /media 不同，在 /mnt 下我们需要手动挂载。该目录可以是空的，也可以有用于挂载单个设备的子目录。
9.  `/opt`  
/opt 目录包含可选软件包。在这里，可选软件包指的是那些不属于系统的软件包，例如，我们作为附加组件安装的第三方软件。
10. `/root`
/root 目录是系统根用户的主目录。
11. `/run`  
/run 目录存储系统启动后的系统信息数据。应用程序将进程 ID、套接字描述符等瞬时文件存储在该目录中。
12. `/sbin`  
与 /bin 目录类似，/sbin（系统二进制文件）目录也包含启动 Linux 系统所需的随时可运行的可执行文件。不过，与 /bin 二进制文件不同的是，/sbin 目录的内容只能由root用户执行。
13. `/srv`  
/srv 目录包含服务数据。换句话说，由我们的系统提供服务的特定网站数据很可能存储在这里。例如，如果我们使用 HTTP 服务器为网站提供服务，那么我们可能会在此目录中存储与网站相关的文件。
14. `/tmp`  
/tmp 目录包含临时文件。这些文件中有许多是由系统中正在运行的进程创建的，它们将临时数据存储在该目录下。因此，系统启动或关闭时可能会清除该目录。
15. `/usr`  
/usr 目录包含可执行文件和只读数据。与系统使用的文件不同，该目录下的文件由用户使用。因此，/usr/sbin 和 /usr/bin 目录分别包含非必要的 /bin 和 /sbin 二进制文件。本地编译应用程序的默认安装位置是 /usr/local。
16. `/var`  
/var（可变）目录包含临时文件和临时文件，这些文件的大小可能会改变。我们可以在这里找到许多 spools 和日志文件。
17. `/proc`
事实上，这并不是一个目录，而是系统自动挂载在 `/proc` 目录下的一个虚拟文件系统。它包含内核、系统和进程的相关信息。

## ls
<center><img src="pics/ls.png" width="80%"></center>

对于 /dev 下的设备文件，不会显示文件的大小，而是显示设备的主辅设备号ID

## 常用命令汇总
1. 创建及删除
	+ 创建：`mkdir dir`
	+ 删除：`rm file`
	+ 删除非空目录：`rm -rf file目录`
	+ 删除日志 `rm *log` (等价: $`find ./ -name “*log” -exec rm {}` ;)
	+ 删除特殊文件名的日志(文件名以-开头，-在rm 中是option 开头字段): `rm ./-filename `
	+ 移动：`mv 源文件路径 目的文件路径`  源路径 -> 目的路径
	+ 复制：`cp 源文件路径 目的文件路径` (复制目录：`cp -r 源文件路径 目的文件路径` )
2. 创建及删除
	+ 找到文件/目录位置：`cd`
	+ 切换到上一个工作目录： `cd -`
	+ 切换到home目录： `cd` 或者 `cd ~`
	+ 显示当前路径: `pwd`
	+ 更改当前工作路径为path: `$cd path`
3. 列出目录项
	+ 显示当前目录下的文件: `ls`
	+ 按时间排序，以列表的方式显示目录项: `ls -lrt`
4. 查找目录及文件 find/locate
	+ 搜寻文件或目录: `find ./ -name "core*" | xargs file`
	+ 查找目标文件夹中是否有obj文件:`find ./ -name '*.o'`
	+ 递归当前目录及子目录删除所有.o文件：`find ./ -name "*.o" -exec rm {} \;`
	+ 寻找包含有string的路径: `locate string`
	+ 与find不同，locate并不是实时查找。你需要更新数据库，以获得最新的文件索引信息: `updatedb`
5. 查看文件内容
	+ 显示时同时显示行号: `cat -n file`
	+ 按页显示文件列表内容: `ls -al | more`
	+ 只看前10行: `head -10 file`
	+ 显示文件倒数五行: `tail -5 file`
	+ 查看两个文件间的差别: `diff file1 file2`
	+ 动态显示文本最新信息: `tail -f crawler.log`
6. 查找文件内容
	+ `egrep '03.1\/CO\/AE' TSF_STAT_111130.log.012`
	+ `cat TSF_STAT_111130.log.012 | grep '03.1\/CO\/AE'`
7. 文件与目录权限修改
	+ 改变文件的拥有者: `chown owner-name file`
	+ 改变文件读、写、执行等属性: `chmod u+x start.sh`
	+ 递归子目录修改： `chown -R tuxapp source/`
	+ 增加脚本可执行权限： `chmod a+x myscript`
8. 给文件增加别名
	+ `ln cc ccAgain` :硬连接；删除一个，将仍能找到；
	+ `ln -s cc ccTo` :符号链接(软链接)；删除源，另一个无法使用；（后面一个ccTo 为新建的文件）


## Chmod 总结
Linux chmod（英文全拼：change mode）命令是控制用户对文件的权限的命令。  
Linux/Unix 的文件调用权限分为三级 : 文件所有者（Owner）、用户组（Group）、其它用户（Other Users）。

<center><img src="pics/chmod.jpeg" width="50%"></center>

只有文件所有者和超级用户可以修改文件或目录的权限。可以使用绝对模式（八进制数字模式），符号模式指定文件的权限。
<center><img src="pics/rwx-standard-unix-permission-bits.png" width="50%"></center>

语法：`chmod [-cfvR] [--help] [--version] mode file...`

其中：
- u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。
- \+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。
- r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。

其他参数说明：
+ -c : 若该文件权限确实已经更改，才显示其更改动作
+ -f : 若该文件权限无法被更改也不要显示错误讯息
+ -v : 显示权限变更的详细资料
+ -R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递归的方式逐个变更)
+ --help : 显示辅助说明
+ --version : 显示版本


u->user->文件所有者  
g->group->文件所有者所在组  
o->others->所有其他用户  
a->all->所有用户, 相当于 ugo  

\+ -> 为指定的用户类型增加权限  
\- -> 去除指定用户类型的权限  
= -> 设置指定用户权限的设置，即将用户类型的所有权限重新设置

permission 的符号模式表:

r	读	设置为可读权限  
w	写	设置为可写权限  
x	执行权限	设置为可执行权限  
X	特殊执行权限	只有当文件为目录文件，或者其他类型的用户有可执行权限时，才将文件权限设置可执行  
s	setuid/gid	当文件被执行时，根据who参数指定的用户类型设置文件的setuid或者setgid权限  
t	粘贴位	设置粘贴位，只有超级用户可以设置该位，只有文件所有者u可以使用该位  