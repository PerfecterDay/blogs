# Linux环境变量总结
{docsify-updated}

- [Linux环境变量总结](#linux环境变量总结)
  - [Linux环境变量分类](#linux环境变量分类)
    - [全局环境变量](#全局环境变量)
    - [局部环境变量](#局部环境变量)
    - [设置环境变量](#设置环境变量)
    - [删除环境变量](#删除环境变量)
    - [PATH 环境变量](#path-环境变量)
  - [Linux设置环境变量的方法](#linux设置环境变量的方法)
      - [登陆shell](#登陆shell)
  - [Linux环境变量使用](#linux环境变量使用)


bash shell用一个叫作环境变量(environment variable)的特性来存储有关shell会话和工作环境的信息(这也是它们被称作环境变量的原因)。这项特性允许你在内存中存储数据，以便程序或shell中运行的脚本能够轻松访问到它们。这也是存储持久数据的一种简便方法。

## Linux环境变量分类
一、按照生命周期来分，Linux环境变量可以分为两类：
1. 永久的：需要用户修改相关的配置文件，变量永久生效。
2. 临时的：用户利用export命令，在当前终端下声明环境变量，关闭Shell终端失效。

二、按照作用域来分，Linux环境变量可以分为：
1. 全局变量：全局环境变量对于shell会话和所有生成的子shell都是可见的。这让对那些所创建的子shell需要获取父shell信息的程序来说非常有用。
2. 局部变量：局部变量则只对创建它们的 shell可见。

### 全局环境变量
Linux系统在你开始bash会话时就设置了一些全局环境变量。系统环境变量基本上都是使用全大写字母，以区别于普通用户的环境变量。
要查看全局变量，可以使用`env`或`printenv`命令。要显示个别环境变量的值，可以使用`printenv [var_name]`命令，但是不要用env命令。

### 局部环境变量
局部环境变量只能在定义它们的进程中可见。尽管它们是局部的，但是和全局环境变量一样重要。事实上，Linux系统也默认定义了标准的局部环境变量。不过你也可以定义自己的局部变量，这些变量被称为用户定义局部变量。

查看局部环境变量的列表有点复杂。遗憾的是，在Linux系统并没有一个只显示局部环境 变量的命令。 `set` 命令会显示为某个特定进程设置的所有环境变量，包括局部变量、全局变量以及用户定义变量。

### 设置环境变量
1. 设置局部用户定义变量
   直接在shell中声明环境变量的名字和值即可：`my_variable=Hello`，引用的时候使用 `$varname` 即可。如果是你自己创建的局 部变量或是shell脚本，请使用小写字母。变量名区分大小写。如果此时生成一个子 shell 进程，上述声明的局部变量是不可用的。
2. 设置全局环境变量
   在设定全局环境变量的进程所创建的子进程中，该变量都是可见的。创建全局环境变量的方法是先创建一个局部环境变量，然后再用`export`把它导出到全局环境中。

### 删除环境变量
可以用`unset`命令删除环境变量。在unset命令中引用环境变量时，记住不要使用`$`。在涉及环境变量名时，什么时候该使用`$`，什么时候不该使用`$`，实在让人摸不着头脑。 记住一点就行了:如果要用到变量，使用`$`;如果要操作变量，不使用`$`。

### PATH 环境变量
当你在shell命令行界面中输入一个外部命令时，shell必须搜索系统来找到对应 的程序。PATH环境变量定义了用于进行命令和程序查找的目录。PATH中各个目录之间，是用冒号分隔的。你只需引用原来的PATH值，然后再给这个字符串添加新目录就行了。
`export PATH=$PATH:/home/christine/Scripts`

## Linux设置环境变量的方法
在你登入Linux系统启动一个bash shell时，默认情况下bash会在几个文件中查找命令。这些文件叫作启动文件或环境文件。bash检查的启动文件取决于你启动bash shell的方式。启动bash shell有3种方式:
1. 登录时作为默认登录shell
2. 作为非登录shell的交互式shell
3. 作为运行脚本的非交互shell

#### 登陆shell
当你登录Linux系统时，bash shell会作为登录shell启动。登录shell会从5个不同的启动文件里 读取命令:
+ /etc/profile
+ $HOME/.bash_profile
+ $HOME/.bashrc
+ $HOME/.bash_login 
+ $HOME/.profile

/etc/profile文件是系统上默认的bash shell的主启动文件。系统上的每个用户登录时都会执行 这个启动文件。

一、在/etc/profile文件中添加变量 对所有用户生效（永久的）
用vim在文件/etc/profile文件中增加变量，该变量将会对Linux下所有用户有效，并且是“永久的”。修改文件后要想马上生效还要运行`source /etc/profile` 不然只能在下次重启时生效。

二、在用户目录下的 `.bash_profile` 文件中增加变量 【对单一用户生效（永久的）】
用 `vim ~/.bash_profile` 文件中增加变量，改变量仅会对当前用户有效，并且是“永久的”。修改文件后要想马上生效还要运行 `source ~/.bash_profile` 不然只能在下次重进此用户时生效。

三、直接运行 `export` 命令定义变量 【只对当前shell（BASH）有效（临时的）】
在shell的命令行下直接使用 `export 变量名=变量值`
定义变量，该变量只在当前的shell（BASH）或其子shell（BASH）下是有效的，shell关闭了，变量也就失效了，再打开新shell时就没有这个变量，需要使用的话还需要重新定义。

## Linux环境变量使用
一、Linux中常见的环境变量有：
+ PATH：指定命令的搜索路径
+ HOME：指定用户的主工作目录（即用户登陆到Linux系统中时，默认的目录）。
+ HISTSIZE：指保存历史命令记录的条数。
+ LOGNAME：指当前用户的登录名。
+ HOSTNAME：指主机的名称，许多应用程序如果要用到主机名的话，通常是从这个环境变量中来取得的
+ SHELL：指当前用户用的是哪种Shell。
+ LANG/LANGUGE：和语言相关的环境变量，使用多种语言的用户可以修改此环境变量。
+ MAIL：指当前用户的邮件存放目录。

二、Linux也提供了修改和查看环境变量的命令，下面通过几个实例来说明：
+ echo         显示某个环境变量值 echo $PATH
+ export   设置一个新的环境变量 export HELLO="hello" (可以无引号,值中有空格时需要引号)
+ env      显示所有环境变量
+ set      显示本地定义的shell变量  
+ unset        清除环境变量 unset HELLO
+ readonly     设置只读环境变量 readonly HELLO

> https://cloud.tencent.com/developer/article/1773182
