## 数据库事务实战
{docsify-updated}

- [数据库事务实战](#数据库事务实战)
  - [悲观锁](#悲观锁)


### 悲观锁
如下图所示，左右两边分别开启了事务，在左边执行 `select... for update` 后，事务提交之前，右边的 `select... for update` 会被 block：
<center><img src="pics/Pessimistic.jpg" width=80%></center>

注意，这只有两个事务同时锁住同一条记录（数据）时才会被 block，如果此时 `select .... for update` 的是另一个数据，不会block：
<center><img src="pics/Pessimistic-2.jpg" width=80%></center>

当被 block 时，只有获取锁的事务提交了事务，被 block 的事务才能继续执行：
<center><img src="pics/Pessimistic-3.jpg" width=80%></center>
