# 模块
{docsify-updated}

>　https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules

目录结构：
```
index.html
main.js
modules/
    canvas.js
    square.js
```

## 导出
为了获得模块的功能要做的第一件事是把它们导出来。使用 export 语句来完成。

最简单的方法是把它（指上面的 export 语句）放到你想要导出的项前面，比如导出 square 功能：
```js
export const name = "square";

export function draw(ctx, length, x, y, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, length, length);

  return {
    length: length,
    x: x,
    y: y,
    color: color,
  };
}
```

**能够导出函数，var，let，const, 和等会会看到的类。export 要放在最外层；比如你不能够在函数内使用 export**。

一个更方便的方法导出所有你想要导出的模块的方法是在模块文件的末尾使用一个 export 语句，语句是用花括号括起来的用逗号分割的列表。比如：
```
export { name, draw, reportArea, reportPerimeter };
```

## 导入
如果想在模块外面使用一些功能，那你就需要导入他们才能使用。最简单的就像下面这样的：
```js
import { name, draw, reportArea, reportPerimeter } from '/js-examples/modules/basic-modules/modules/square.js';
```

使用 `import` 语句，然后你被花括号包围的用逗号分隔的你想导入的功能列表，然后是关键字 `from` ，然后是模块文件的路径。模块文件的路径是**相对于站点根目录的相对路径**，对于我们的 `basic-modules` 应该是 `/js-examples/modules/basic-modules`。

当然，我们写的路径有一点不同——我们使用点语法意味“当前路径”，跟随着包含我们想要找的文件的路径。这比每次都要写下整个相对路径要好得多，因为它更短，使得 URL 可移植——如果在站点层中你把它移动到不同的路径下面仍然能够工作。  
`/js/examples/modules/basic-modules/modules/square.js` ---> `./modules/square.js`


## 应用模块到你的 HTML
需要把 `type="module"` 放到 `<script>` 标签中，来声明这个脚本是一个模块：
```
<script type="module" src="main.js"></script>
```
你导入模块功能的脚本基本是作为顶级模块。如果省略它，Firefox 就会给出错误“SyntaxError: import declarations may only appear at top level of a module。

你只能在模块内部使用 import 和export 语句；不是普通脚本文件。
