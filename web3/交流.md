# 快速了解以太坊
以太坊是具有图灵完备的编程语⾔、更⾼效的共识机制、⽀持更多应⽤场景的智能合约开发平台，可以为各种去中⼼化应⽤（DecentralizedApp,DApp）提供运⾏环境。

以太坊就是⼀个基于**区块链**的**智能合约**平台。

## 区块链
对区块链最好的描述是将其描述为一个**公共数据库**，是一个分布式账本系统，它由网络中的许多计算机更新和共享。

"区块"指的是数据和状态是按顺序批量或"区块"存储的。如果你向别人发送ETH，需要将交易数据添加到一个区块中才算成功。   
"链"指的是每个区块加密引用其父块。换句话说，区块被链接在一起。在不改变所有后续区块的情况下，区块内数据是无法改变，但改变后续区块需要整个网络的共识。

## 智能合约
在以太坊中，就是通过把基于区块链的交易，拿到⼀个具有⾃⼰的指令集、⾃⼰的存储机制（临时存储和永久存储）的可编程虚拟机中来执⾏，来实现智能合约的。这个虚拟机就是以太坊协议的最⼤创新，就是所谓的“以太坊虚拟机（EthereumVirtualMachine，EVM）”。所以，以太坊也可以看作是“区块链+EVM”。EVM就是前⾯以太坊的技术定义中提到的⽀持图灵完备编程语⾔的基础设施，我们可以通过特定的⾼级语⾔，⽐如Solidity/Vyper，来⾃定义地编写智能合约。

最后需要解释的就是上⽂中以太坊的技术定义⾥多次提到的去中性化应⽤程序。DApp（Decentralized Application）可以简单地理解为以智能合约⽽不是以传统的、由个别组织和公司控制的以中⼼化的服务器（server）后端的应⽤程序，DApp的叫法是为了与那些基于客户端⼀服务器（client-server）架构或者浏览器-服务器（browser-server）架构的所谓中⼼化应⽤程序相区别。

## 以太坊的基本概念
### 账户
> https://ethereum.org/zh/developers/docs/accounts/

以太坊有两种帐户类型：
+ 外部所有的帐户(EOA): 由任何拥有私钥的人控制
+ 合约帐户: 部署到网络上的智能合约，由代码控制。

共同点：
+ 接收、持有和发送ETH和token
+ 与已部署的智能合约进行交互

主要区别：
+ 创建外部所有的帐户是免费的，但是创建合约存在成本，因为需要使用网络存储空间
+ 外部所有的帐户可以发起交易，只能在收到交易时发送交易
+ 外部所有的帐户之间只能进行以太币和代币交易，从外部帐户向合约帐户发起的交易能触发可执行多种操作的代码，例如转移代币甚至创建新合约
+ 外部所有的帐户由一对加密密钥组成：控制帐户活动的公钥和私钥 ，合约帐户没有私钥。相反，它们由智能合约代码逻辑控制

<img src="./acct.png" alt="">

账户状态由四个部分组成，无论账户类型如何，它们都存在：
+ `nonce`：如果该账户是外部账户，则此数字代表从该账户地址发送的交易数量。如果该账户是合约账户，则nonce代表该账户创建的合约数量。
+ `balance`：此地址拥有的Wei数量。每个Ether对应1e+18Wei。
+ `storageRoot`：MerklePatricia树根节点的哈希值。该树编码了此帐户存储内容的哈希值，默认为空。
+ `codeHash`:此账户的EVM（以太坊虚拟机）代码的哈希值。对于合约账户，合约代码会被哈希并存储为codeHash。对于外部账户，codeHash字段为空字符串的哈希值。

<img src="./acct.webp" alt="">

### 账户创建

#### 外部账户
当你想要创建一个帐户时，大多数程序库会生成一个随机私钥。
私钥由64个十六进制字符组成，可以用密码加密保存。
例如：
`fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036415f`

使用椭圆曲线加密法从私钥生成公钥。通过获取公钥Keccak-256哈希的最后20个字节并校验码前面添加0x，可以为帐户获取公共地址。
这意味着外部帐户(EOA)有一个42字符的地址（20字节区块，即40个十六进制字符，加上0x前缀）。
例如：
0x5e97870f263700f46aa00d967821199b9bc5a120

#### 合约账户
合约帐户也有一个42个字符组成的十六进制地址：
例如：
`0x06012c8cf97bead5deae237070f9587f8e7a266d`

合约地址通常在将合约部署到以太坊区块链时给出。地址产生自创建人的地址和从创建人地址发送的交易数量（“nonce”）。

### 钱包
帐户和钱包不同。钱包是一个**界面或应用程序**，可让你与以太坊帐户（外部帐户或合约帐户）进行交互。

### 交易与消息
交易是由帐户发出，带密码学签名的指令。 帐户将发起交易以更新以太坊网络的状态。 最简单的交易是将 ETH 从一个帐户转到另一个帐户。
以太坊交易是指由**外部持有帐户**发起的行动，换句话说，是指由人管理而不是智能合约管理的帐户。

+ 转账给另一个外部账户
+ 部署合约
> https://ethereum.org/zh/developers/docs/transactions/


“消息”在《以太坊黄⽪书》中的定义是：“两个账户之间发送的数据（data）和值（value，即以太币）。消息既可能由⾃治对象产⽣⼀些确定性操作时产⽣，也可能由交易在数字签名时产⽣。”这⾥的意思是⼀个消息就是账户之间传递的数据和⼀定数量的以太币。消息有可能是在合约之间交互的时候产⽣，也有可能由交易产⽣，是⼀种内部的参数传输，不会发布在区块链上。

交易都会在区块链上记录，⽽消息是发⽣在EVM内部的参数传输，不会显⽰在区块链上。（举例？）

### 以太币和gas
> https://ethereum.org/zh/developers/docs/gas/

由于每笔以太坊交易都需要使用计算资源来执行，因此必须为这些资源付费，以确保以太坊不容易受到垃圾信息的攻击，并且不会陷入无限的计算循环。 计算费用以燃料费的形式支付。

以太坊作为⼀个“世界计算机”，在执⾏每次操作的时候都会消耗⼀定的资源（计算、存储、内存等），因此以太坊的使⽤者想要让以太坊其⼯作，就要向⽹络中的矿⼯⽀付⼀定的费⽤。由于计算机执⾏每次任务消耗的资源量⼏乎是恒定的，⽤户也希望⾃⼰⽀出的费⽤不会因为以太币价格的波动⽽有太⼤的变化。于是，gas作为以太坊中⼀种特殊的⼯作量计量单位应运⽽⽣。


## sepolia 测试网
> https://ethereum.org/zh/developers/docs/networks/

以下网址可以发掘合约/地址/交易hash 等信息：
> https://sepolia.etherscan.io/

https://chainlist.org/ 可用区块链列表