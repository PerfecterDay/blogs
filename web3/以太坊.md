# 以太坊
{docsify-updated}

> https://ethereum.org/zh/developers/docs/

与许多传统货币不同，ETH会随着时间推移变得越来越稀缺。每次有人使用以太坊时，都会销毁一小部分ETH，使其永久退出流通。在交易繁忙的日子里，被销毁的ETH数量会超过新产生的量，这使得ETH具有通缩特性，其价值会随时间推移而增长。以太坊的使用量越大，被销毁的ETH就越多。

When you send $10 in stablecoins to a friend on Ethereum:
1. You open your wallet, add the account address and the amount, then click send.
2. Your wallet signs the payment and broadcasts it to the network.
3. The payment waits in the public queue (mempool) until a block proposer picks it.
4. The block proposer adds it to the next block of transactions, broadcasts it, and earns a fee.
5. The stablecoin contract moves $10 from you to your friend, and both wallets update.
6. A global network of validators double-check and attest to the validity of the changes.

When you mint a $5 collectible on Ethereum:
1. You connect your wallet to the dapp and choose the item to mint.
2. You confirm the purchase; the wallet signs and broadcasts the transaction.
3. The mint request joins the mempool and is added to a block by a validator.
4. The NFT smart contract records your wallet as the new owner.
5. Your new collectible appears in your wallet a few seconds later.


## 账户
以太坊的全局“共享状态”由许多小对象（“账户”）组成，这些小对象能够通过消息传递框架相互交互。每个账户都有一个与其关联的状态和一个 20 字节的地址 。以太坊中的地址是一个 160 位的标识符，用于标识任何账户。有两种类型的帐户：
1. 外部拥有的账户， 由私钥控制并且有没有与它们相关的代码。
2. 合约账户， 由其合约代码控制 ，并有与之关联的代码。

账户状态由四个部分组成，无论账户类型如何，它们都存在：
+ `nonce` ：如果该账户是外部账户，则此数字代表从该账户地址发送的交易数量。如果该账户是合约账户，则 nonce 代表该账户创建的合约数量。
+ `balance` ：此地址拥有的 Wei 数量。每个 Ether 对应 1e+18 Wei。
+ `storageRoot` ：Merkle Patricia 树根节点的哈希值。该树编码了此帐户存储内容的哈希值，默认为空。
+ `codeHash` : 此账户的 EVM（以太坊虚拟机）代码的哈希值。对于合约账户，合约代码会被哈希并存储为 codeHash 。对于外部账户， codeHash 字段为空字符串的哈希值。

## 以太坊究竟是如何运行的
> https://preethikasireddy.medium.com/how-does-ethereum-work-anyway-22d1df506369

## sepolia 测试网
以下网址可以发掘合约/地址/交易hash 等信息：
> https://sepolia.etherscan.io/

https://chainlist.org/ 可用区块链列表


## 钱包
钱包和帐户不同。 钱包是一个界面或应用程序，可让你与以太坊帐户（外部帐户或合约帐户）进行交互。


## ERC20
ERC-20 是什么？
+ ERC：Ethereum Request for Comments（以太坊的标准提案）
+ 20：提案的编号

ERC-20 是以太坊上最早、最常用的 代币标准，**它规定了一套代币（Token）合约必须实现的接口（函数和事件）。**

这样做的好处是：
+ 不同的钱包（MetaMask、TrustWallet 等）、交易所（Binance、Uniswap 等）都能识别并支持 ERC-20 代币。
+ 开发者不用重新设计代币接口，大家都遵循同一套规则。

一个符合 ERC-20 的代币合约通常会有这些函数：
| 函数 | 作用 |
|------|------|
| `totalSupply()` | 返回代币总量 |
| `balanceOf(address)` | 返回某个地址的余额 |
| `transfer(to, amount)` | 从调用者转账给 `to` |
| `approve(spender, amount)` | 授权某个地址可以代替自己花费代币 |
| `transferFrom(from, to, amount)` | 从 `from` 地址转账到 `to`（前提是有授权） |
| `allowance(owner, spender)` | 查看授权额度 |

同时会有事件：
+ `Transfer` ：代币转账时触发
+ `Approval` ：授权时触发