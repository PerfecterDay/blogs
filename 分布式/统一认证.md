# 统一认证
{docsify-updated}

## 场景
有个用户中心系统，用户登陆后会分配一个 token/session 给到客户端表示登陆状态，系统中还有其他服务，比如搜索、交易、资讯、卡券等，客户请求到这些服务时，可能都需要校验一下客户的登录状态，有可能还要获取一些客户信息。应该如何设计呢 ？

### 方案一
一个自然的解决方案就是，请求到每个服务的时候，后端服务拿着客户请求中的 token 去用户中心系统校验 token 状态，并且获取一些用户基础信息。这个方案明显有以下几个弊端：
+ 各个服务都要对接用户中心的校验接口
+ 这些服务的很多接口都要去请求用户中心，这样导致用户中心流量激增，而且各个服务接口延时也会增加，而且如果这些服务之间也有接口调用可能会重复调用校验
+ 如果用户中心的校验接口有改动，所有服务对接的逻辑都要改动

### 方案二
token/session 信息保存到缓存 Redis 中，各个业务系统拿着客户请求中的 token/session 去缓存中查询并校验有效性。这样各个业务系统可以独立去缓存中校验 token/session，不需要请求用户中心的接口了。

### 方案三
用户中心校验完成后签发一个 JWT 给到客户端，后续各个业务系统只要校验 JWT 的有效性即可。

